<Window x:Class="CombinifyWpf.Dialogs.FileSelectDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:MetroUiToolkit;assembly=MetroUiToolkit"
        xmlns:converter="clr-namespace:CombinifyWpf.Converters"
        xmlns:controls="clr-namespace:CombinifyWpf.Controls"
        Title="FileSelectDialog"
        WindowStyle="None"
        WindowStartupLocation="CenterOwner"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        Height="484"
        Width="739"
        Loaded="Window_Loaded"
        FontFamily="Segoe UI Light"
        Name="FileWindow"
        MouseMove="FileWindow_MouseMove"
        ContentRendered="FileWindow_ContentRendered"
        UseLayoutRounding="True" >
    <Grid>
        <Border BorderBrush="#FF1BA1E2"
                BorderThickness="1"
                HorizontalAlignment="Stretch"
                Margin="0"
                Name="winBorder"
                VerticalAlignment="Stretch" />

        <Label Content="{Binding Title, ElementName=FileWindow}"
               Height="Auto"
               HorizontalAlignment="Stretch"
               Margin="0"
               Name="lblHeader"
               VerticalAlignment="Top"
               Background="#FF1BA1E2"
               Foreground="White"
               FontSize="24"
               Padding="10,5,0,5" />
        <my:WinStatesButton Margin="0,0,0,0"
                            Name="winStatesButton"
                            VerticalAlignment="Top"
                            Foreground="#ADFFFFFF"
                            ForegroundHover="White"
                            IsMinimizeVisible="False"
                            IsMaximizeVisible="False"
                            HorizontalAlignment="Right"
                            Width="30"
                            CloseClick="winStatesButton_CloseClick">
            <my:WinStatesButton.BackgroundHover>
                <SolidColorBrush />
            </my:WinStatesButton.BackgroundHover>
        </my:WinStatesButton>

        <Label HorizontalAlignment="Stretch"
               Margin="290,50,5,0"
               Name="breadCrumb"
               Background="White"
               BorderBrush="#4CCCCCCC"
               BorderThickness="1"
               VerticalAlignment="Top">
            <TextBlock Name="Text"
                       Width="{Binding ActualWidth, ElementName=breadCrumb}"
                       TextTrimming="CharacterEllipsis" />
        </Label>

            <Canvas Name="backSvg"
                Width="60"
                Height="60"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                ClipToBounds="True"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                Margin="223,53,0,0"
                Opacity="0.4"
                Background="Transparent"
                MouseEnter="Canvas_MouseEnter"
                MouseLeave="Canvas_MouseLeave"
                MouseLeftButtonDown="backSvg_MouseLeftButtonDown"
                ToolTip="Move up a directory">
            <Canvas.LayoutTransform>
                <TransformGroup>
                    <RotateTransform Angle="90" />
                    <ScaleTransform ScaleX=".4"
                                    ScaleY=".4" />
                </TransformGroup>
            </Canvas.LayoutTransform>
            <Path Fill="#FF000000"
                  Name="fileArrow"
                  RenderTransform="-0.1052119,-0.00072278715,0.00072278715,-0.1052119,56.626599,56.992078">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"
                                  Figures="M301.908,212.254L50,212.254 50,299.746 301.908,299.746 185.758,416.452 302.313,416.452 462,256 302.313,95.548 185.758,95.548z" />
                </Path.Data>
            </Path>
            <Path Fill="#FF000000"
                  Name="fileCircle">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"
                                  Figures="M30,7.2815622C31.109709,7.2815622 32.229177,7.3639892 33.327091,7.5265141 38.186369,8.2457866 42.59084,10.462148 46.064436,13.935599 49.538033,17.40905 51.754104,21.813667 52.473667,26.672799 52.800465,28.880569 52.800465,31.119358 52.473667,33.326982 51.75425,38.18626 49.538033,42.590731 46.064436,46.064327 42.59084,49.537924 38.186369,51.753995 33.327237,52.473558 32.229323,52.636229 31.109709,52.71851 30,52.71851 28.890289,52.71851 27.770677,52.63623 26.672909,52.473558 21.81363,51.754141 17.409159,49.537924 13.935564,46.064327 10.461966,42.590731 8.2458958,38.18626 7.5263319,33.327128 7.1995354,31.119358 7.1995354,28.880569 7.5263319,26.672946 8.2457502,21.813667 10.461966,17.409196 13.935564,13.935599 17.409159,10.462002 21.81363,8.2457866 26.672909,7.5265141 27.770821,7.3639894 28.890289,7.2815622 30,7.2815622 M30,0C28.5316,0 27.063055,0.10791276 25.606596,0.323447 12.528474,2.2596145 2.2595781,12.528656 0.32341061,25.606632 -0.10780353,28.519695 -0.10780353,31.480378 0.32341061,34.393439 2.2595781,47.471563 12.52862,57.740458 25.606596,59.676626 27.063055,59.892305 28.5316,60.000072 30,60.000072 31.468399,60.000072 32.936946,59.892305 34.393402,59.676626 47.471526,57.740458 57.740422,47.471417 59.67659,34.393439 60.107803,31.480378 60.107803,28.519695 59.67659,25.606632 57.740422,12.528656 47.471526,2.2596145 34.393402,0.323447 32.936946,0.10791276 31.468399,0 30,0L30,0z" />
                </Path.Data>
            </Path>
        </Canvas>

        <Canvas Name="refreshSvg"
                Width="62"
                Height="55.4634399414063"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="260,53,0,0"
                Opacity="0.4"
                Background="Transparent"
                ClipToBounds="True"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                MouseEnter="Canvas_MouseEnter"
                MouseLeave="Canvas_MouseLeave"
                ToolTip="Refresh directory"
                MouseLeftButtonDown="refreshSvg_MouseLeftButtonDown">
            <Canvas.LayoutTransform>
                <ScaleTransform ScaleX=".4"
                                ScaleY=".4" />
            </Canvas.LayoutTransform>
            <Path Fill="#FF000000"
                  Name="refresh_4_icon">
                <Path.Data>
                    <PathGeometry FillRule="Nonzero"
                                  Figures="M46.970388,14.007584C40.25944,8.5050694 29.59885,9.3538424 23.576671,15.51341 20.079131,18.908943 18.241914,23.804667 18.291262,28.647554 20.058058,28.647554 21.824855,28.647554 23.591651,28.647554 19.657427,32.828992 15.723204,37.01043 11.78898,41.191868 7.85932,37.01043 3.92966,32.828992 0,28.647554 1.7125728,28.647554 3.4251456,28.647554 5.1377184,28.647554 4.9854376,20.403829 10.54614,12.921464 17.804988,9.4288678 27.206298,4.5824924 39.864549,5.6424409 46.970388,14.007584z M13.029466,45.992344C19.74041,51.494851 30.400984,50.646096 36.423184,44.48656 39.920712,41.091064 41.757941,36.195379 41.708593,31.352524 39.941797,31.352524 38.175,31.352524 36.408204,31.352524 40.342427,27.171036 44.276651,22.989548 48.210874,18.80806 52.140583,22.989548 56.070291,27.171036 60,31.352524 58.287378,31.352524 56.574757,31.352524 54.862135,31.352524 55.014409,39.596229 49.453687,47.078548 42.194866,50.571135 32.793542,55.417524 20.135272,54.357546 13.029466,45.992344z" />
                </Path.Data>
            </Path>
        </Canvas>

        <Border BorderBrush="#4CCCCCCC"
                BorderThickness="1"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Margin="5,80,535,45">

            <TreeView HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Margin="0,0,0,-1"
                      Name="LocalTree"
                      FontSize="12"
                      Background="Transparent"
                      SelectedItemChanged="LocalTree_SelectedItemChanged"
                      MouseDoubleClick="LocalTree_MouseDoubleClick"
                      BorderThickness="0">
                <TreeView.Resources>
                    <Style TargetType="{x:Type TreeViewItem}">
                        <Setter Property="HeaderTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Name="img"
                                               Width="20"
                                               Height="20"
                                               Stretch="Fill"
                                               Source="{Binding 
                                                                RelativeSource={RelativeSource 
                                                                Mode=FindAncestor, 
                                                                AncestorType={x:Type TreeViewItem}}, 
                                                                Path=Header, 
                                                                Converter={converter:HeaderToImageConverter}}" />
                                        <TextBlock Text="{Binding}"
                                                   Margin="5,0" />
                                    </StackPanel>
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TreeView.Resources>
            </TreeView>
        </Border>

        <Border BorderBrush="#4CCCCCCC"
                BorderThickness="1"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Margin="220,80,5,45">
            <my:MetroScrollViewer Name="metroScrollViewer1"
                                  VerticalAlignment="Stretch"
                                  HorizontalAlignment="Stretch"
                                  Padding="5">
                <WrapPanel Name="filePanel"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch">

                </WrapPanel>
            </my:MetroScrollViewer>
        </Border>

        <my:MetroTextBox HorizontalAlignment="Stretch"
                         Margin="5,0,178,5"
                         Name="selectedPath"
                         Background="White"
                         BorderBrush="#4CCCCCCC"
                         Text="{Binding Path=Path, ElementName=FileWindow, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         VerticalAlignment="Bottom" />
        <my:MetroButton Content="ok"
                        Height="28"
                        HorizontalAlignment="Right"
                        Margin="0,0,5,5"
                        Name="OkButton"
                        VerticalAlignment="Bottom"
                        Width="75"
                        Click="OkButton_Click" />
        <my:MetroButton Content="cancel"
                        Height="28"
                        HorizontalAlignment="Right"
                        Margin="0,0,90,5"
                        Name="CancelButton"
                        VerticalAlignment="Bottom"
                        Width="75"
                        Click="CancelButton_Click" />
    </Grid>
</Window>
